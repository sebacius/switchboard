<!-- Drain confirmation modal backdrop -->
<div class="fixed inset-0 z-50 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <!-- Backdrop overlay -->
    <div class="fixed inset-0 bg-slate-900/75 transition-opacity" onclick="closeModal()"></div>

    <!-- Modal panel -->
    <div class="flex min-h-full items-center justify-center p-4">
        <div class="relative transform overflow-hidden rounded-lg bg-slate-800 border border-slate-700 shadow-xl transition-all w-full max-w-md">
            <!-- Header -->
            <div class="px-6 py-4 border-b border-slate-700">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-amber-500/20 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path>
                            </svg>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-white" id="modal-title">Disable RTP Manager</h3>
                            <p class="text-sm text-slate-400">{{.NodeID}}</p>
                        </div>
                    </div>
                    <button onclick="closeModal()" class="text-slate-400 hover:text-white transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Body -->
            <div class="px-6 py-5">
                <div class="mb-4">
                    <div class="flex items-center gap-2 text-amber-400 mb-3">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <span class="font-medium">This node has {{.SessionCount}} active session{{if ne .SessionCount 1}}s{{end}}</span>
                    </div>
                    <p class="text-slate-300 text-sm">
                        Choose how to handle existing calls before disabling this RTP manager:
                    </p>
                </div>

                <!-- Drain options -->
                <div class="space-y-3">
                    <!-- Graceful drain option -->
                    <button
                        hx-post="/admin/rtpmanagers/drain?server={{.Server}}&nodeId={{.NodeID}}&mode=graceful"
                        hx-target="#rtpmanagers-container"
                        hx-swap="innerHTML"
                        class="w-full flex items-start gap-4 p-4 rounded-lg border border-slate-600 bg-slate-700/50
                               hover:bg-slate-700 hover:border-emerald-500/50 transition-all group text-left">
                        <div class="w-10 h-10 bg-emerald-500/20 rounded-lg flex items-center justify-center flex-shrink-0
                                    group-hover:bg-emerald-500/30 transition-colors">
                            <svg class="w-5 h-5 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div>
                            <p class="font-medium text-white group-hover:text-emerald-400 transition-colors">Graceful Drain</p>
                            <p class="text-sm text-slate-400 mt-1">
                                Wait for active calls to end naturally. New calls will be routed to other nodes.
                            </p>
                        </div>
                    </button>

                    <!-- Aggressive drain option -->
                    <button
                        hx-post="/admin/rtpmanagers/drain?server={{.Server}}&nodeId={{.NodeID}}&mode=aggressive"
                        hx-target="#rtpmanagers-container"
                        hx-swap="innerHTML"
                        class="w-full flex items-start gap-4 p-4 rounded-lg border border-slate-600 bg-slate-700/50
                               hover:bg-slate-700 hover:border-red-500/50 transition-all group text-left">
                        <div class="w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center flex-shrink-0
                                    group-hover:bg-red-500/30 transition-colors">
                            <svg class="w-5 h-5 text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <div>
                            <p class="font-medium text-white group-hover:text-red-400 transition-colors">Aggressive Drain</p>
                            <p class="text-sm text-slate-400 mt-1">
                                Terminate active calls immediately. Use for urgent maintenance.
                            </p>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Footer -->
            <div class="px-6 py-4 border-t border-slate-700 bg-slate-800/50">
                <button onclick="closeModal()"
                        class="w-full px-4 py-2.5 text-sm font-medium rounded-lg
                               bg-slate-700 text-slate-300 hover:bg-slate-600 hover:text-white
                               transition-colors focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-2 focus:ring-offset-slate-800">
                    Cancel
                </button>
            </div>
        </div>
    </div>
</div>
